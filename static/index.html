<!DOCTYPE html>
<html>
<head>
    <title>Wellbeing Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<script>
    // block access if not logged in
    if (!localStorage.getItem("user")) {
        window.location.href = "/login";
    }
</script>

<button class="dashboard-btn" onclick="window.location.href='/dashboard'">Dashboard</button>
<button class="logout" onclick="logout()">Logout</button>
<button class="nav-btn" onclick="window.location.href='/doctors'">Doctor Consultation</button>

<div class="chat-container">
    <h2>Wellbeing Assistant</h2>

    <div class="mood-support-tools">
        <h3>ðŸ§  Mood-Based Support Tools</h3>
        <div class="tool-buttons">
            <button onclick="showSolution('anxiety')">Anxiety Relief</button>
            <button onclick="showSolution('depression')">Depression Support</button>
            <button onclick="showSolution('stress')">Stress Management</button>
            <button onclick="showSolution('overwhelm')">Overwhelm Help</button>
            <button onclick="showSolution('motivation')">Motivation Boost</button>
            <button onclick="showSolution('loneliness')">Loneliness Support</button>
        </div>
    </div>

    <div class="mood-section">
        <select id="mood">
            <option>Happy</option>
            <option>Calm</option>
            <option>Stressed</option>
            <option>Anxious</option>
            <option>Sad</option>
        </select>
        <button onclick="saveMood()">Save Mood</button>
    </div>

    <div id="chart-container">
        <canvas id="moodChart"></canvas>
    </div>

    <div class="chat-section">
        <div id="chat-box"></div>
        <input id="user-input" placeholder="Type your message">
        <button id="send-btn" onclick="sendMessage()">Send</button>
    </div>

    <div class="export-section">
        <button onclick="exportCSV()">Download CSV</button>
        <button onclick="exportPDF()">Download PDF</button>
    </div>

    <div class="additional-features">
        <button onclick="window.location.href='/doctors'">Doctor Consultation</button>
        <button onclick="openFeedbackModal()">Give Feedback</button>
    </div>

    <!-- Feedback Modal -->
    <div id="feedback-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeFeedbackModal()">&times;</span>
            <h2>Share Your Feedback</h2>
            <form id="feedback-form">
                <div class="rating-section">
                    <label>Rate your experience (1-5):</label>
                    <div class="rating-stars">
                        <input type="radio" id="star5" name="rating" value="5"><label for="star5">â˜…</label>
                        <input type="radio" id="star4" name="rating" value="4"><label for="star4">â˜…</label>
                        <input type="radio" id="star3" name="rating" value="3"><label for="star3">â˜…</label>
                        <input type="radio" id="star2" name="rating" value="2"><label for="star2">â˜…</label>
                        <input type="radio" id="star1" name="rating" value="1"><label for="star1">â˜…</label>
                    </div>
                </div>
                <div class="feedback-text">
                    <label for="feedback-text">Your feedback:</label>
                    <textarea id="feedback-text" name="feedback_text" rows="4" placeholder="Tell us how we can improve..."></textarea>
                </div>
                <button type="submit">Submit Feedback</button>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/static/app.js"></script>
</body>
</html>
